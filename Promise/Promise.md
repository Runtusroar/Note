## Promise

### 1 前置知识

#### 1.1 异步与同步

**异步和同步的概念是基于单线程这个背景而诞生的**，JavaScript是一门单线程语言，为了防止某个耗时任务导致程序假死的问题，JavaScript 把待执行的任务分为了同步任务和异步任务

**简单来说：同步任务和异步任务都是任务，只是有些任务耗时短，将其定义为同步任务；有些任务耗时长，将其定义为了异步任务**

##### ① 同步任务

又叫做非耗时任务，指的是**在主线程上排队执行**的那些任务  

只有前一个任务执行完毕，才能执行后一个任务

##### ② 异步任务

又叫做耗时任务，异步任务由JavaScript **委托给宿主环境进行执行**

当异步任务执行完成后，会通知JavaScript 主线程执行异步任务的回调函数

#### 1.2 同步、异步执行过程

![](C:\Users\Runtu\Desktop\AllThing\前端学习笔记\Promise\Promise笔记图片\同步异步执行过程.png)

①**同步任务由JavaScript 主线程次序执行**

②**异步任务委托给宿主环境执行**

③已完成的异步任务对应的回调函数，会被加入到任务队列中等待执行

④JavaScript 主线程的执行栈被清空后，会读取任务队列中的回调函数，次序执行

⑤JavaScript 主线程不断重复上面的第4 步

JavaScript 主线程从“任务队列”中读取异步任务的回调函数，放到执行栈中依次执行。这个过程是循环不断的，所以整个的这种运行机制又称为EventLoop(事件循环)。

#### 1.3 Chromium运行环境



![Chromium运行环境](C:\Users\Runtu\Desktop\AllThing\前端学习笔记\Promise\Promise笔记图片\Chromium运行环境.png)

###### GUI线程

GUI线程就是渲染页面的，他解析HTML和CSS，然后将他们构建成DOM树和渲染树就是这个线程负责的。

###### JS引擎线程

这个线程就是负责执行JS的主线程，前面说的"JS是单线程的"就是指的这个线程。

**GUI线程和JS线程是互斥的，原因是两者都可操作DOM，为了避免混乱**

###### 宿主环境

① 定时器触发线程

② 事件触发线程

③ 异步HTTP请求线程

### 2 认识Promise

#### 2.1 什么是Promise

① 语法上：**Promise是一个构造函数**

② 功能上：**Promise对象用来封装一个异步操作并可以获取其成功/失败的结果值**
